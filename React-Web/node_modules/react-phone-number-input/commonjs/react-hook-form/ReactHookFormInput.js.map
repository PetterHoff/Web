{"version":3,"file":"ReactHookFormInput.js","names":["_react","_interopRequireWildcard","require","_reactHookForm","_propTypes","_interopRequireDefault","_useExternalRef3","_excluded","_excluded2","obj","__esModule","_getRequireWildcardCache","e","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_extends","assign","bind","target","arguments","length","source","key","prototype","apply","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","len","arr2","l","Symbol","iterator","f","next","done","push","value","isArray","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","ReactHookFormInput","_ref","externalRef","Component","defaultValue","shouldUnregister","control","rules","onChange_","onChange","onBlur_","onBlur","rest","_useExternalRef","useExternalRef","_useExternalRef2","internalRef","refPassthrough","undefined","renderInputComponent","_ref2","ref","restReactHookFormControlledFieldProps","useImperativeHandle","focus","current","onChangeCombined","useCallback","onBlurCombined","event","createElement","onFocus","Controller","render","props","field","React","forwardRef","propTypes","PropTypes","elementType","isRequired","string","bool","object","func","_default","exports"],"sources":["../../source/react-hook-form/ReactHookFormInput.js"],"sourcesContent":["import React, { useCallback, useImperativeHandle } from 'react'\r\nimport { Controller } from 'react-hook-form'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport useExternalRef from '../useExternalRef.js'\r\n\r\nlet ReactHookFormInput = ({\r\n  Component,\r\n  name,\r\n  defaultValue,\r\n  shouldUnregister,\r\n  control,\r\n  rules,\r\n  onChange: onChange_,\r\n  onBlur: onBlur_,\r\n  ...rest\r\n}, externalRef) => {\r\n  const [internalRef, refPassthrough] = useExternalRef(externalRef)\r\n\r\n  // `feact-hook-form` doesn't know how to properly handle `undefined` values.\r\n  // https://github.com/react-hook-form/react-hook-form/issues/2990\r\n  defaultValue = defaultValue === undefined ? null : defaultValue\r\n\r\n  const renderInputComponent = ({\r\n    ref,\r\n    onChange,\r\n    onBlur,\r\n    // `restReactHookFormControlledFieldProps` contain properties like `name` and `value`.\r\n    // https://github.com/react-hook-form/react-hook-form/blob/b0e6c3057ac12a7b12d5616aecf3791acb7d7204/src/types/controller.ts#L21-L30\r\n    ...restReactHookFormControlledFieldProps\r\n  }) => {\r\n    // Setting `ref` passed by `react-hook-form` results in a bug:\r\n    // when an initial value is defined (example: \"+78005553535\")\r\n    // it seems to be set directly on the `ref`d `<input/>`\r\n    // by `react-hook-form` and the result is a non-formatted\r\n    // \"+78005553535\" initial value in the `<input/>`.\r\n    //\r\n    // To work around that bug, a fake `ref` is assigned,\r\n    // so that it could only `.focus()` it and no more.\r\n    //\r\n    // `useImperativeHandle()` hook seems to allow `ref` being `undefined`.\r\n    //\r\n    // if (ref) {\r\n      useImperativeHandle(ref, () => ({\r\n        focus() {\r\n          internalRef.current.focus()\r\n        }\r\n      }))\r\n    // }\r\n\r\n    // This function may not work correctly when `defaultValues` are set for the input\r\n    // and the user clears the input value manually: the default value may re-appear as a result.\r\n    // https://github.com/catamphetamine/react-phone-number-input/issues/405#issuecomment-1295885201\r\n    const onChangeCombined = useCallback((value) => {\r\n      // `react-hook-form` doesn't know how to properly handle `undefined` values.\r\n      // https://github.com/react-hook-form/react-hook-form/issues/2990\r\n      if (value === undefined) {\r\n        value = null\r\n      }\r\n      onChange(value)\r\n      if (onChange_) {\r\n        onChange_(value)\r\n      }\r\n    }, [\r\n      onChange,\r\n      onChange_\r\n    ])\r\n\r\n    const onBlurCombined = useCallback((event) => {\r\n      onBlur(event)\r\n      if (onBlur_) {\r\n        onBlur_(event)\r\n      }\r\n    }, [\r\n      onBlur,\r\n      onBlur_\r\n    ])\r\n\r\n    return (\r\n      <Component\r\n        {...rest}\r\n        {...restReactHookFormControlledFieldProps}\r\n        ref={refPassthrough}\r\n        onChange={onChangeCombined}\r\n        onBlur={onBlurCombined}/>\r\n    )\r\n  }\r\n\r\n  // `react-hook-form@7` no longer accepts `onFocus` property.\r\n  // Since this component can be used with both `v6` and `v7`,\r\n  // the `onFocus` property is left here.\r\n  const onFocus = useCallback(() => {\r\n    // internalRef.current.disabled = false\r\n    internalRef.current.focus()\r\n  }, [])\r\n\r\n  return (\r\n    <Controller\r\n      control={control}\r\n      name={name}\r\n      defaultValue={defaultValue}\r\n      shouldUnregister={shouldUnregister}\r\n      rules={rules}\r\n      onFocus={onFocus}\r\n      render={(props) => {\r\n        // Differentiate between `react-hook-form@6` and `react-hook-form@7`.\r\n        // https://react-hook-form.com/migrate-v6-to-v7/\r\n        // https://gitlab.com/catamphetamine/react-phone-number-input/-/issues/57\r\n        // `props` (before v7) and `props.fields` (in v7) contain properties like:\r\n        // `ref`, `name`, `value`, `onChange`, `onBlur`.\r\n        // https://github.com/react-hook-form/react-hook-form/blob/b0e6c3057ac12a7b12d5616aecf3791acb7d7204/src/types/controller.ts#L21-L30\r\n        return renderInputComponent(props.field || props)\r\n      }}/>\r\n  )\r\n}\r\n\r\nReactHookFormInput = React.forwardRef(ReactHookFormInput)\r\n\r\nReactHookFormInput.propTypes = {\r\n  Component: PropTypes.elementType.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  defaultValue: PropTypes.string,\r\n  // A quote from `react-hook-form`:\r\n  // Without `shouldUnregister: true`, an input value would be retained when input is removed.\r\n  // Setting `shouldUnregister: true` makes the form behave more closer to native.\r\n  shouldUnregister: PropTypes.bool,\r\n  // A developer should pass a `control` object that is returned from `useForm()` hook.\r\n  // Not required when using `<FormProvider/>`.\r\n  control: PropTypes.object,\r\n  rules: PropTypes.object,\r\n  onChange: PropTypes.func,\r\n  onBlur: PropTypes.func\r\n}\r\n\r\nexport default ReactHookFormInput"],"mappings":"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","ignoreList":[]}